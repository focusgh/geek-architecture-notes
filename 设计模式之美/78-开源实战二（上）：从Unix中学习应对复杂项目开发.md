[toc]

## 78 | 开源实战二（上）：从 Unix 开源开发学习应对大型复杂项目开发

-   软件开发的难度无外两点：
    -   一是**技术难**，代码量不一定多，但要解决的问题比较难，需要用到一些比较深的技术解决方案或算法。
    -   二是**复杂度**，技术不难，但项目很庞大，业务复杂，代码量多，参与开发的人多。

-   如何应对复杂软件开发？Unix 开源项目就是一个值得学习的例子。

-   我们就以 Unix 开源项目的开发为引子，分三节课，通过下面三个话题，详细地讲讲应对复杂软件开发的方法论。

    >   从**设计原则和思想**的角度来看。
    >
    >   从研发管理和开发技巧的角度来看。
    >
    >   聚焦在 Code Review 上来看。

### 封装与抽象

-   在 Unix、Linux 系统中，有一句经典的话 “Everything is a file.” （一切皆文件）。意思就是，在 Unix、Linux 系统中，很多东西都被抽象成“文件”这样一个概念。它们使用文件系统的路径作为统一的命名空间，使用统一的 read、write 标准函数来访问。
-   封装了不同类型设备的访问细节，抽象为统一的文件访问方式，更高层的代码就能基于统一的访问方式，来访问底层不同类型的设备。
-   这样做的好处是，隔离底层设备访问的复杂性。统一的访问方式能够简化上层代码的编写，并且代码更容易复用。

### 分层与模块化

-   模块化是构建复杂系统的常用手段。
-   不同的模块间通过接口来进行通信，模块间耦合很小，每个小的团队聚焦于一个独立的高内聚模块来开发，最终像搭积木一样，将各个模块组装起来，构建成一个超级复杂的系统。
-   分层也是我们常用来架构复杂系统的方法。
-   面对复杂系统的开发，我们要善于应用分层技术，把容易复用、跟具体业务关系不大的代码，尽量下沉到下层，把容易变动、跟具体业务强相关的代码，尽量上移到上层。

### 基于接口通信

-   在设计模块或层要暴露的接口的时候，我们要学会隐藏实现，接口从命名到定义都要抽象一些，尽量少涉及具体的实现细节。

### 高内聚、松耦合

-   高内聚、松耦合是一个比较通用的设计思想。

### 为扩展而设计

-   越是复杂项目，越要在前期设计上多花点时间。提前思考项目中未来可能会有哪些功能需要扩展，提前预留好扩展点，以便在未来需求变更的时候，在不改动代码整体结构的情况下，轻松地添加新功能。

### KISS 首要原则

-   简单清晰、可读性好，是任何大型软件开发要遵循的首要原则。

### 最小惊奇原则

-   这个原则等同于“遵守开发规范”，意思是，在做设计或者编码的时候要遵守统一的开发规范，避免反直觉的设计。

### 重点回顾

1.  今天我们主要从设计原则和思想的角度，也可以说是从设计开发的角度，来学习如何应对复杂软件开发。总结了 7 点我认为比较重要的：
    -   封装与抽象
    -   分层与模块化
    -   基于接口通信
    -   高内聚、松耦合
    -   为扩展而设计
    -   KISS 首要原则
    -   最小惊奇原则