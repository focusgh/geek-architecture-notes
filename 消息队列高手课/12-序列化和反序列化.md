[toc]

## 12 | 序列化与反序列化：如何通过网络传输结构化的数据？

1.  要想使用网络框架的 API 来传输结构化的数据，**必须得先实现结构化的数据与字节流间的双向转换**。即**序列化和反序列化**。
2.  序列化的用途：
    -   网络数据传输
    -   结构化数据保存

### 你该选择哪种序列化实现？

1.  多种序列化的选择，需要权衡几个因素：

    -   易于阅读
    -   复杂度低
    -   性能
    -   密度越大越好，也就是占用空间越小越好

2.  根据业务，选择合适的序列化实现。**不会存在一种序列化实现在这四个方面都是最优的**。

3.  JSON 序列化

    -   序列化前

        -   ```java
            
            User:
              name: "zhangsan"
              age: 23
              married: true
            ```

    -   序列化后

        -   ```java
            
            {"name":"zhangsan","age":"23","married":"true"}
            ```

    -   序列化代码 

        -   ```java
            
            byte [] serializedUser = JsonConvert.SerializeObject(user).getBytes("UTF-8");
            ```

### 实现高性能的序列化和反序列化

1.  使用专用序列化方法，提高性能，减小序列化后的字节长度。

    -   ```java
        
        03   | 08 7a 68 61 6e 67 73 61 6e | 17 | 01
        User |    z  h  a  n  g  s  a  n  | 23 | true
        ```

    -   

### 小结

1.  进程间要通过网络传输结构化的数据，需要通过序列化和反序列化来实现**结构化数据和二进制数据的双向转换**。
2.  在选择序列化时，需要综合考虑：
    -   可读性
    -   复杂度
    -   性能
    -   信息密度