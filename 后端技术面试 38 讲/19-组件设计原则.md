[toc]

## 19 | 组件设计原则：组件的边界在哪里？

1.  软件的复杂度和它的规模成**指数关系**。
    -   一个复杂度为 100 的系统，如果能拆分成两个子系统。那么每个子系统的复杂度应该是 25 ，而不是 50。
2.  软件需要进行模块化、组件化设计。
3.  软件设计的核心目标就是**高内聚、低耦合**。今天，我们从这两个维度，看下组件的设计原则。

### 组件内聚原则

1.  组件内聚原则，主要讨论**哪些类应该聚合在同一组件中**。
2.  具体设计中，可以遵循以下三个原则：

#### 复用发布等同原则

1.  复用发布等同原则是说，**软件复用的最小粒度应该等同于其发布的最小粒度**。
2.  组件是软件复用和发布的最小粒度软件单元。这个粒度既是复用粒度，也是发布粒度。
3.  版本号约定：**主版本号.次版本号.修订号**。

#### 共同封闭原则

1.  共同封闭原则是说，**我们应该将那些会同时修改，并且为了相同目的修改的类放在同一个组件中**。

#### 共同复用原则

1.  共同复用原则是说，**不要强迫一个组件的用户依赖他们不需要的东西**。

### 组件耦合原则

1.  组件耦合原则**讨论组件之间的耦合关系应该如何设计**。组件耦合关系设计也应该遵循三个原则：

#### 无循环依赖原则

1.  无循环依赖原则是说， **组件依赖关系中不应该出现环**。

#### 稳定依赖原则

1.  稳定依赖原则是说，**组件依赖关系必须指向更稳定的方向**。
    -   不稳定的组件应该依赖稳定的组件，而不是反过来。
2.  **组件不应该依赖一个比自己还不稳定的组件**。

#### 稳定抽象原则

1.  稳定抽象原则是说，**一个组件抽象化程度应该与其稳定程序一致**。
2.  如果你设计的组件是具体的，不稳定的，那么可以**为这个组件对外提供服务的类设计一组接口，并把这组接口封装在一个专门的组件中**，那么这个组件就比较抽象、稳定。

### 小结

1.  公司的技术沉淀与实力，公司的业务情况，部门与团队的人情世故，甚至公司的过往历史，都可能会对组件的设计产生影响。